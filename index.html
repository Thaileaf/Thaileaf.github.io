<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSSAnimations</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href="./main.css"/>
</head>
<body>
<div>
    <h1>Thaison's WebDev Portfolio</h1>
    <ul>
        <li>
            <a href="./Week2/index.html">Week2 - As We May Think</a><br>
        </li>
        <li>
        <a href="./Week3/index.html">Week3 - Ways of Seeing</a><br>

        </li>
        <li>

            <a href="./Poetry/index.html">Week5 - Poetry</a><br>
        </li>
        <li>

            <a href="./OldHeroism/indexold.html">Week6 - Heroism of Vision</a><br>
        </li>
        <li>

            <a href="css/index2.html">Week8 - CSS</a><br>
        </li>
        <li>
            <a href="./Week10/index.html">Week 10 - RMB City</a>
        </li>
    </ul>

</div>
<p>If snow broke refresh</p>
<div id="sno" class="snow front"></div>
<div class="snow front"></div>
<div class="snow front b"></div>
<div id="sno2" class="snow middle"></div>
<div class="snow middle"></div>
<div class="snow middle b"></div>
<div id="sno3" class="snow back"></div>
<div class="snow back"></div>
<div class="snow back b"></div>
<button onclick ="enlarge()">Press Me</button>
</body>
<script>
    window.onLoad = spawn();

    function matrix() { // Debug
        var layers = document.getElementsByClassName("snow");
        for(let j = 0; j < layers.length; j++) {
            console.log(getComputedStyle(layers[j]).transform)
        }
    }
    var counter = 5;
    async function enlarge() {
        var layers = document.getElementsByClassName("snow");
        for(let i = 1; i < counter; i += .1) {
            await sleep(1);
            for(let j = 0; j < layers.length; j++)
            layers[j].style.setProperty("transform", "scale("+i+") translateX(-" + i * 200 + "px)");
        }
    }


    function spawn() {
        // console.log("hello");
        const audio = new Audio("./music/sleigh.mp3");
        audio.play();

        var density = 50;
        var c_density = ((window.innerWidth * window.innerHeight) * density) / 1933440; // Magic ratio

        console.log(window.innerWidth * window.innerHeight);

        var layers = document.getElementsByClassName("snow");

        for(let j = 0; j < layers.length; j++) {
            for(let i = 0; i < c_density; i++) {
                let x = Math.floor(Math.random() * window.innerWidth);
                let y = Math.min(Math.floor(Math.random() * window.innerHeight), window.innerHeight - 100);
                let newFlake = ", rgb(255, 255, 255) " + x + "px " + y + "px 10px 0px"
                let elem = layers[j];
                let style = getComputedStyle(elem).boxShadow;
                style += newFlake;
                // console.log(getComputedStyle(elem).transform);
                elem.style.setProperty("box-shadow", style)

                // document.getElementById("sno").style.boxShadow = newFlakes
            }

            // let trans = Math.floor(Math.random() * 50);
            // let transtring = "translateY(200vh) translateX(" + trans + "vw)";
            // console.log(transtring);
            // layers[j].style.transform = transtring;
        }

    }
</script>
<script>
    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms)); // Why does this only run once?
    }
</script>
</html>